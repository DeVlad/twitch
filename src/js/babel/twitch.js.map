{"version":3,"sources":["../twitch.js"],"names":["channelUrl","streamUrl","channels","channel","promise","Promise","resolve","reject","fetch","then","response","json","dataCollector","myData","Error","$","append","renderResult","name","logo","url","err","console","log","stream","data","hasOwnProperty","status","display_name"],"mappings":";;AAAA;AACA;AACA;AACA,IAAIA,aAAa,gDAAjB;AACA,IAAIC,YAAY,+CAAhB;AACA;AACA,IAAIC,WAAW,CAAC,cAAD,EAAiB,SAAjB,EAA4B,YAA5B,CAAf;AACA;;;;;;AACA,yBAAoBA,QAApB,8HAA8B;AAAA,YAArBC,OAAqB;;AAC1B,YAAIC,UAAU,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AACjD;AACAD,oBAAQE,MAAMR,aAAaG,OAAnB,EAA4BM,IAA5B,CAAiC;AAAA,uBAAYC,SAASC,IAAT,EAAZ;AAAA,aAAjC,EAA8DF,IAA9D,CAAmE;AAAA,uBAAQG,cAAcC,MAAd,GAAuBF,IAA/B;AAAA,aAAnE,EACAH,MAAMP,YAAYE,OAAlB,EAA2BM,IAA3B,CAAgC;AAAA,uBAAYC,SAASC,IAAT,EAAZ;AAAA,aAAhC,EAA6DF,IAA7D,CAAkE;AAAA,uBAAQG,cAAcC,MAAd,GAAuBF,IAA/B;AAAA,aAAlE,CADA,CAAR;AAEAJ,mBAAOO,MAAM,8BAAN,CAAP;AACH,SALa,CAAd;AAMAV,gBAAQK,IAAR,CAAa,YAAY;AACrBM,cAAE,UAAF,EAAcC,MAAd,CAAqBC,aAAaL,cAAcM,IAA3B,EAAiCN,cAAcO,IAA/C,EAAqDP,cAAcQ,GAAnE,CAArB;AACH,SAFD,EAEG,UAAUC,GAAV,EAAe;AACdC,oBAAQC,GAAR,CAAYF,GAAZ,EADc,CACI;AACrB,SAJD;AAKA;AACA,YAAIT,gBAAgB;AAChB;AACAM,kBAAM,EAFU;AAGhBC,kBAAM,EAHU;AAIhBC,iBAAK,EAJW;AAKhBI,oBAAQ,EALQ;AAMhB,gBAAIX,MAAJ,GAAa;AACT;AACA,uBAAO,CAAC,KAAKK,IAAN,EAAY,KAAKC,IAAjB,EAAuB,KAAKC,GAA5B,EAAiC,KAAKI,MAAtC,CAAP;AACH,aATe;AAUhB,gBAAIX,MAAJ,CAAWY,IAAX,EAAiB;AACb;AACA,oBAAIA,KAAKC,cAAL,CAAoB,QAApB,CAAJ,EAAmC;AAC/B,wBAAID,KAAKD,MAAL,KAAgB,IAApB,EAA0B;AACtB;AACA,6BAAKA,MAAL,GAAcC,KAAKD,MAAL,CAAYrB,OAAZ,CAAoBwB,MAAlC;AACH;AACJ,iBALD,MAMK,IAAIF,KAAKC,cAAL,CAAoB,cAApB,CAAJ,EAAyC;AAC1C,yBAAKR,IAAL,GAAYO,KAAKG,YAAjB;AACA,yBAAKT,IAAL,GAAYM,KAAKN,IAAjB;AACA,yBAAKC,GAAL,GAAWK,KAAKL,GAAhB;AACH,iBAJI,MAKA;AACDE,4BAAQC,GAAR,CAAY,gBAAZ;AACH;AACJ;AA1Be,SAApB;AA4BH;AACD;;;;;;;;;;;;;;;;AACA,SAASN,YAAT,CAAsBC,IAAtB,EAA4BC,IAA5B,EAAkCC,GAAlC,EAAuC;AACnC;AACA,WAAO,6BAA6BF,IAA7B,GAAoC,yBAApC,GAAgE,GAAhE,GAAsEE,GAAtE,GAA4E,GAA5E,GAAkF,KAAlF,GAA0F,WAA1F,GAAwG,GAAxG,GAA8GD,IAA9G,GAAqH,GAArH,GAA2H,GAA3H,GAAiI,MAAjI,GAA0ID,IAA1I,GAAiJ,OAAjJ,GAA2J,MAA3J,GAAoK,SAA3K;AACH","file":"twitch.js","sourcesContent":["//var channels = [\"freecodecamp\", \"ESL_SC2\", \"OgamingSC2\", \"cretetion\", \"storbeck\", \"habathcx\", \"RobotCaleb\", \"noobs2ninjas\"];\n// TODO: Missing chanells\n// Settings\nvar channelUrl = \"https://wind-bow.gomix.me/twitch-api/channels/\";\nvar streamUrl = \"https://wind-bow.gomix.me/twitch-api/streams/\";\n// Yup it's hardcoded\nvar channels = [\"freecodecamp\", \"ESL_SC2\", \"OgamingSC2\"];\n// Ugly multiple api hits\nfor (var channel of channels) {\n    var promise = new Promise(function (resolve, reject) {\n        //console.log(json);        \n        resolve(fetch(channelUrl + channel).then(response => response.json()).then(json => dataCollector.myData = json,\n                fetch(streamUrl + channel).then(response => response.json()).then(json => dataCollector.myData = json)));\n        reject(Error(\"Error: fetch API data failed\"));\n    });\n    promise.then(function () {\n        $(\".content\").append(renderResult(dataCollector.name, dataCollector.logo, dataCollector.url));\n    }, function (err) {\n        console.log(err); // Error\n    });\n    // Data Collector Object\n    var dataCollector = {\n        // Props are public\n        name: \"\",\n        logo: \"\",\n        url: \"\",\n        stream: \"\",\n        get myData() {\n            // For future use ?\n            return [this.name, this.logo, this.url, this.stream];\n        },\n        set myData(data) {\n            //console.log(data);            \n            if (data.hasOwnProperty(\"stream\")) {\n                if (data.stream !== null) {\n                    // Current stream\n                    this.stream = data.stream.channel.status;\n                }\n            }\n            else if (data.hasOwnProperty(\"display_name\")) {\n                this.name = data.display_name;\n                this.logo = data.logo;\n                this.url = data.url;\n            }\n            else {\n                console.log(\"Error: No data\");\n            }\n        }\n    };\n}\n// Render View\nfunction renderResult(name, logo, url) {\n    // Display in clickable div blocks    \n    return '<div class=\"result\" id=\"' + name + '\" onclick=\"window.open(' + \"'\" + url + \"'\" + ')\">' + \"<img src=\" + \"'\" + logo + \"'\" + \">\" + '<h3>' + name + '</h3>' + '<br>' + '</.div>';\n}"]}