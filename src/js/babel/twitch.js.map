{"version":3,"sources":["../twitch.js"],"names":["channelUrl","streamUrl","isStreamingLive","channels","channel","promiseGetChannel","Promise","resolve","reject","fetch","then","response","json","Error","promiseGetStream","all","data","stream","status","$","append","renderResult","display_name","logo","url","name","streamClass"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA,IAAIA,aAAa,gDAAjB;AACA,IAAIC,YAAY,+CAAhB;AACA,IAAIC,kBAAkB,EAAtB;AACA;AACA,IAAIC,WAAW,CAAC,cAAD,EAAiB,SAAjB,EAA4B,YAA5B,CAAf;;AAEA;AACA;;;;;;AACA,yBAAoBA,QAApB,8HAA8B;AAAA,YAArBC,OAAqB;;AAC1B,YAAIC,oBAAoB,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC3D;AACAD,oBAAQE,MAAMT,aAAaI,OAAnB,EAA4BM,IAA5B,CAAiC;AAAA,uBAAYC,SAASC,IAAT,EAAZ;AAAA,aAAjC,EAA8DF,IAA9D,CAAmE;AAAA,uBAAQE,IAAR;AAAA,aAAnE,CAAR;AACAJ,mBAAOK,MAAM,sCAAN,CAAP;AACH,SAJuB,CAAxB;AAKA,YAAIC,mBAAmB,IAAIR,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1D;AACAD,oBAAQE,MAAMR,YAAYG,OAAlB,EAA2BM,IAA3B,CAAgC;AAAA,uBAAYC,SAASC,IAAT,EAAZ;AAAA,aAAhC,EAA6DF,IAA7D,CAAkE;AAAA,uBAAQE,IAAR;AAAA,aAAlE,CAAR;AACAJ,mBAAOK,MAAM,qCAAN,CAAP;AACH,SAJsB,CAAvB;AAKAP,gBAAQS,GAAR,CAAY,CAACV,iBAAD,EAAoBS,gBAApB,CAAZ,EAAmDJ,IAAnD,CAAwD,UAAUM,IAAV,EAAgB;AACpE;AACD;;AAEC,gBAAIA,KAAK,CAAL,EAAQC,MAAR,KAAmB,IAAvB,EAA6B;AAC1B;AACCf,kCAAkB,EAAlB;AACH,aAHD,MAIK;AACH;AACEA,kCAAkBc,KAAK,CAAL,EAAQC,MAAR,CAAeb,OAAf,CAAuBc,MAAzC;AACH;AACDC,cAAE,UAAF,EAAcC,MAAd,CAAqBC,aAAaL,KAAK,CAAL,EAAQM,YAArB,EAAmCN,KAAK,CAAL,EAAQO,IAA3C,EAAiDP,KAAK,CAAL,EAAQQ,GAAzD,EAA8DtB,eAA9D,CAArB;AACH,SAbD;AAcH;AACD;;;;;;;;;;;;;;;;AACA,SAASmB,YAAT,CAAsBI,IAAtB,EAA4BF,IAA5B,EAAkCC,GAAlC,EAAuCP,MAAvC,EAA+C;AAC3C;AACA,QAAIS,cAAc,SAAlB;AACA,QAAIT,WAAW,EAAf,EAAmB;AACfS,sBAAc,MAAd;AACH;;AAED,WAAO,6BAA6BD,IAA7B,GAAoC,yBAApC,GAAgE,GAAhE,GAAsED,GAAtE,GAA4E,GAA5E,GAAkF,KAAlF,GAA0F,cAA1F,GAA4GE,WAA5G,GAA0H,QAA1H,GAAqI,GAArI,GAA2IH,IAA3I,GAAkJ,GAAlJ,GAAwJ,GAAxJ,GAA8J,MAA9J,GAAuKE,IAAvK,GAA8K,OAA9K,GAAwL,MAAxL,GAAiMR,MAAjM,GAA0M,OAA1M,GAAoN,SAA3N;AACH","file":"twitch.js","sourcesContent":["// -----------------------------------------------------------------------------------------\n// TODO: Missing channels\n// Be Aware - it's not real-time API for live streams !\n// -----------------------------------------------------------------------------------------\n// Settings\nvar channelUrl = \"https://wind-bow.gomix.me/twitch-api/channels/\";\nvar streamUrl = \"https://wind-bow.gomix.me/twitch-api/streams/\";\nvar isStreamingLive = \"\";\n// Yup it's hardcoded\nvar channels = [\"freecodecamp\", \"ESL_SC2\", \"OgamingSC2\"];\n\n//var channels = [\"freecodecamp\", \"ESL_SC2\", \"OgamingSC2\", \"cretetion\", \"storbeck\", \"habathcx\", \"RobotCaleb\", \"noobs2ninjas\"];\n// Ugly multiple api hits\nfor (var channel of channels) {\n    var promiseGetChannel = new Promise(function (resolve, reject) {\n        //  console.log('channel ok');                \n        resolve(fetch(channelUrl + channel).then(response => response.json()).then(json => json));\n        reject(Error(\"Error: fetch channel from API failed\"));\n    });\n    var promiseGetStream = new Promise(function (resolve, reject) {\n        //console.log('stream ok');\n        resolve(fetch(streamUrl + channel).then(response => response.json()).then(json => json));\n        reject(Error(\"Error: fetch stream from API failed\"));\n    });\n    Promise.all([promiseGetChannel, promiseGetStream]).then(function (data) {        \n        //console.log('Rendering data');\n       // console.log(data[0].display_name, data[0].logo, data[0].url);\n        \n        if (data[1].stream === null) {\n           // console.log('not streaming');\n            isStreamingLive = \"\";\n        }\n        else {\n          //  console.log(data[1].stream.channel.status);\n            isStreamingLive = data[1].stream.channel.status;\n        }\n        $(\".content\").append(renderResult(data[0].display_name, data[0].logo, data[0].url, isStreamingLive));\n    });\n}\n// Render View\nfunction renderResult(name, logo, url, stream) {\n    // Display in clickable div blocks\n    var streamClass = \"offline\";\n    if (stream !== \"\") {\n        streamClass = \"live\";\n    }\n    \n    return '<div class=\"result\" id=\"' + name + '\" onclick=\"window.open(' + \"'\" + url + \"'\" + ')\">' + \"<img class='\"  + streamClass + \"' src=\" + \"'\" + logo + \"'\" + \">\" + '<h3>' + name + '</h3>' + '<h2>' + stream + '</h2>' + '</.div>';\n}"]}